<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8" />
    <title>TopCoder SRM 144 - 1100: PenLift</title>
    
    <link type="image/x-icon" rel="shortcut icon" href="http://www.topcoder.com/i/favicon.ico"/>
    

    
    <style type="text/css">
        /* font */
body {
    font-family: Helvetica, Arial, Verdana, sans-serif;
    font-size: 16px;
    line-height: 1.2em;
}
ul.constraints > li:before, ul.notes > li:before {
    font-family: monospace;
    font-weight: normal;
}
.heading {
    font-weight: bold;
    font-size: 175%;
    line-height: 1.2em;
}
.section .section-title {
    font-weight: bold;
    font-size: 125%;
}
ol.testcases > li:before {
    font-family: monospace;
}
type {
    font-weight: bold;
    font-family: monospace;
}
li.testcase .data {
    font-family: monospace;
    line-height: 1.5em;
}

/* layout */
.heading {
    margin-top: 0.1em;
    margin-bottom:0.1em;
    text-align: center;
}
.section .section-title {
    margin-top : 1em;
    margin-bottom: 1em;
}
.problem-intro, note, user-constraint {
    padding-left: 1.25em;
}

/* Lists */
ul.constraints, ul.notes, ul.variables, ul.problem-definition-lines {
    list-style-type: none;
    padding: 0px;
}
ul.constraints > li:before {
    content: "-";
    position:relative;
    margin-left: 0px; /* optional, for multiline li element */
    left: 0.625em;
}
ul.notes > li:before {
    content: "-";
    position:relative;
    margin-left: 0px; /* optional, for multiline li element */
    left: 0.625em;
}

/* Testcases */
li.testcase {
    line-height: 1.1em;
    padding-top: 0.625em;
    padding-bottom: 0.625em;
    overflow: auto;
}
li.testcase > .testcase-content > div { padding-bottom: 0.5em; padding-left: 1em; }

li.testcase .testcase-comment {
    margin: 0;
    padding-left: 1em;
}
.testcase-comment p:first-child { margin-top: 0; }
.testcase-comment p:last-child { margin-bottom: 0; }

li.testcase .testcase-content {
    margin: 0.31em;
}

/* Data and variables */
.testcase-output {
    padding: 0.2em 1em 0.2em 0em;
}
.variables, .testcase-output {
    margin-left: 0.5em;
    display: table;
    margin-bottom: 0px;
    margin-top: 0px;
}
.variable {
    display: table-row;
}
.variable .name {
    padding: 0.2em 0em 0.2em 1em;
    font-weight: bold;
    display: table-cell;
    text-align: right;
}
.testcase-output .prefix {
    padding: 0.2em 0em 0.2em 1em;
    display: table-cell;
}
.testcase-output .prefix:after {
    content : ":";
    padding-right: 0.5em;
}
.variable .name:after {
    font-weight: bold;
    content : ":";
    padding-right: 0.5em;
}
.variable .value, .testcase-output .value {
    padding: 0.2em 1em 0.2em 0em;
    display: table-cell;
}
ol.testcases {
    padding: 0px;
    counter-reset: test_number -1;
}
ol.testcases > li {
    list-style:none;
}
ol.testcases > li:before {
    counter-increment:test_number;
    display: block;
    clear: both;
    content:counter(test_number) ")";
    color: inherit;
    background: inherit;
}

/* Problem Definition */
.problem-definition, .problem-limits {
    padding-left: 1.25em;
}
.problem-definition-lines, .limit-lines {
    display: table;
    margin-top: 0px;
    margin-bottom: 0px;
    padding-left: 0px;
}
.definition-line, .limit-line {
    display: table-row;
    height: 1.5em;
    overflow: auto;
}
.limit-name:after {
    content: ":";
    margin-right: 1em;
}
.definition-name, .definition-value, .limit-name, .limit-value {
    display: table-cell;
}
.definition-value {
    padding-left: 0.5em;
}
.definition-name:after {
    content: ":";
}
#contest-division:before {
    content: "Div ";
}
#problem-score:before {
    content: "- Problem ";
}
#problem-name {
    display: block;
}

/* Tags, hidden default */
.tag {
    visibility: hidden;
    position: absolute;
}

        body {
    /* font color */
    color: #333333;
    /* background color */
    background-color: white;
}
.section .section-title {
    /* title color */
    color: black;
}
li.testcase .data {
    /* highlight color */
    background: #eee;
}

    </style>
    
    
    

</head>

<body>
    <h1 class="heading">
        <span id='contest-name'>SRM 144</span>
        <span id='contest-division'>1</span>
        <span id='problem-score'>1100</span>
        <span id='problem-name'>PenLift</span>
    </h1>

    <hr />

    <!-- Problem Statement -->
    <div class="section">
        <h2 class="section-title">Problem Statement</h2>
        <div class="problem-intro">
            <intro><p><i>NOTE: There are images in the examples section of this problem statement that help describe the problem. Please view the problem statement in the HTML window to view them.</i></p>

<p>Given a picture composed entirely of horizontal and vertical line segments, calculate the minimum number of times you must lift your pen to trace every line segment in the picture exactly <b>n</b> times.</p>

<p>Each line segment will be of the form &quot;&lt;x1&gt; &lt;y1&gt; &lt;x2&gt; &lt;y2&gt;&quot; (quotes for clarity), representing a segment from (x1,y1) to (x2,y2).  Segments may cross each other.  Segments may also overlap, in which case you should count the overlapping region as appearing in the drawing only once.  For example, say the drawing were composed of two lines: one from (6,4) to (9,4), and one from (8,4) to (14,4).  Even though they overlap from (8,4) to (9,4), you should treat the drawing as if it were a single line from (6,4) to (14,4).  You would not need to lift your pen at all to trace this drawing.</p></intro>
        </div>
    </div>
    
    <!-- Problem definition -->
    
    <div class="section" id="definition">
        <h2 class="section-title">Definition</h2>
        <div class="problem-definition">
            <ul class="problem-definition-lines">
                <li class="definition-line" id='class-line'>
                    <span class='definition-name'>Class</span>
                    <span class='definition-value'>PenLift</span>
                </li>
                <li class="definition-line" id='method-line'>
                    <span class='definition-name'>Method</span>
                    <span class='definition-value'>numTimes</span>
                </li>
                <li class="definition-line" id='parameters-line'>
                    <span class='definition-name'>Parameters</span>
                    <span class='definition-value'>
                    
                        tuple(string)
                    , 
                        integer
                    
                    </span>
                </li>
                <li class="definition-line" id='returns-line'>
                    <span class='definition-name'>Returns</span>
                    <span class='definition-value'>
                        integer
                    </span>
                </li>
                <li class="definition-line" id='signature-line'>
                    <span class='definition-name'>Method signature</span>
                    <span class='definition-value'>
                        def numTimes(self, segments, n)
                    </span>
                </li>
            </ul>
            <div class="problem-definition-public-tip">(be sure your method is public)</div>
        </div>        
    </div>
    

    <!-- Limits -->
    <div class="section">
        <h2 class="section-title">Limits</h2>
        <div class='problem-limits'>
            <ul class="limit-lines">
                <li class='limit-line'>
                    <span class='limit-name'>Time limit (s)</span>
                    <span class='limit-value'>2.000</span>
                </li>
                <li class='limit-line'>
                    <span class='limit-name'>Memory limit (MB)</span>
                    <span class='limit-value'>64</span>
                </li>
            </ul>
        </div>
    </div>

    
    <!-- Notes -->
    <div class="section">
        <h2 class="section-title">Notes</h2>
        <ul class="notes">
        
            <li><note>The pen starts on the paper at a location of your choice.  This initial placement does not count toward the number of times that the pen needs to be lifted.</note></li>
        
        </ul>
    </div>
    
    
    <!-- Constraints -->
    <div class="section">
        <h2 class="section-title">Constraints</h2>
        <ul class="constraints">
        
            <li><user-constraint><b>segments</b> will contain between 1 and 50 elements, inclusive.</user-constraint></li>
        
            <li><user-constraint>Each element of <b>segments</b> will contain between 7 and 50 characters, inclusive.</user-constraint></li>
        
            <li><user-constraint>Each element of <b>segments</b> will be in the format <tt>&quot;&lt;X1&gt;_&lt;Y1&gt;_&lt;X2&gt;_&lt;Y2&gt;&quot;</tt> (quotes for clarity).  The underscore character represents exactly one space.  The string will have no leading or trailing spaces.</user-constraint></li>
        
            <li><user-constraint><tt>&lt;X1&gt;</tt>, <tt>&lt;Y1&gt;</tt>, <tt>&lt;X2&gt;</tt>, and <tt>&lt;Y2&gt;</tt> will each be between -1000000 and 1000000, inclusive, with no unnecessary leading zeroes.</user-constraint></li>
        
            <li><user-constraint>Each element of <b>segments</b> will represent a horizontal or vertical line segment.  No line segment will reduce to a point.</user-constraint></li>
        
            <li><user-constraint><b>n</b> will be between 1 and 1000000, inclusive.</user-constraint></li>
        
        </ul>
    </div>

    <!-- Test cases -->
    <div class="section">
        <h2 class="section-title">Test cases</h2>
        <ol class="testcases" start='0'>
            
            <li class="testcase">
                <div class="testcase-content">
                    <div class="testcase-input">
                        <div class='tag'>input</div>
                        <ul class="variables">
                        
                            <li class="variable data">
                                <span class="name data">segments</span>
                                <span class="value data">
                                
                                    {&quot;-10 0 10 0&quot;,<br />&nbsp;&quot;0 -10 0 10&quot;}
                                
                                </span>
                            </li>
                        
                            <li class="variable data">
                                <span class="name data">n</span>
                                <span class="value data">
                                
                                    1
                                
                                </span>
                            </li>
                        
                        </ul>
                    </div>
                    <div class="testcase-output">
                        <div class='tag'>output</div>
                        <span class="prefix data">Returns</span>
                        <span class="value data">
                        
                            1
                        
                        </span>
                    </div>
                    
                    <div class="testcase-annotation">
                        <div class='tag'>note</div>
                        <div class="testcase-comment"><p>This picture looks like a plus sign centered at the origin.  One way to trace this image is to start your pen at (-10,0), move right to (10,0), lift your pen and place it at (0,-10), and then move up to (0,10).  There is no way to trace the picture without lifting your pen at all, so the method returns 1.</p></div>
                    </div>
                    
               
                </div>
            </li>
            
            <li class="testcase">
                <div class="testcase-content">
                    <div class="testcase-input">
                        <div class='tag'>input</div>
                        <ul class="variables">
                        
                            <li class="variable data">
                                <span class="name data">segments</span>
                                <span class="value data">
                                
                                    { &quot;-10 0 0 0&quot;, &quot;0 0 10 0&quot;, &quot;0 -10 0 0&quot;, &quot;0 0 0 10&quot; }
                                
                                </span>
                            </li>
                        
                            <li class="variable data">
                                <span class="name data">n</span>
                                <span class="value data">
                                
                                    1
                                
                                </span>
                            </li>
                        
                        </ul>
                    </div>
                    <div class="testcase-output">
                        <div class='tag'>output</div>
                        <span class="prefix data">Returns</span>
                        <span class="value data">
                        
                            1
                        
                        </span>
                    </div>
                    
                    <div class="testcase-annotation">
                        <div class='tag'>note</div>
                        <div class="testcase-comment"><p>The picture is the same as the previous example, except that it has been described with four line segments instead of two.  Therefore, the method still returns 1.</p></div>
                    </div>
                    
               
                </div>
            </li>
            
            <li class="testcase">
                <div class="testcase-content">
                    <div class="testcase-input">
                        <div class='tag'>input</div>
                        <ul class="variables">
                        
                            <li class="variable data">
                                <span class="name data">segments</span>
                                <span class="value data">
                                
                                    { &quot;-10 0 0 0&quot;, &quot;0 0 10 0&quot;, &quot;0 -10 0 0&quot;, &quot;0 0 0 10&quot; }
                                
                                </span>
                            </li>
                        
                            <li class="variable data">
                                <span class="name data">n</span>
                                <span class="value data">
                                
                                    4
                                
                                </span>
                            </li>
                        
                        </ul>
                    </div>
                    <div class="testcase-output">
                        <div class='tag'>output</div>
                        <span class="prefix data">Returns</span>
                        <span class="value data">
                        
                            0
                        
                        </span>
                    </div>
                    
                    <div class="testcase-annotation">
                        <div class='tag'>note</div>
                        <div class="testcase-comment"><p>You are now required to trace each segment exactly 4 times.  You can do so without lifting your pen at all.  Start at (0,0).  Move your pen left to (-10,0), then back right to (0,0), then left again to (-10,0), then right again to (0,0).  You have now traced the first line segment 4 times.  Repeat this process for the other three segments as well.  Since no pen lifts were required, the method returns 0.</p></div>
                    </div>
                    
               
                </div>
            </li>
            
            <li class="testcase">
                <div class="testcase-content">
                    <div class="testcase-input">
                        <div class='tag'>input</div>
                        <ul class="variables">
                        
                            <li class="variable data">
                                <span class="name data">segments</span>
                                <span class="value data">
                                
                                    { &quot;0 0 1 0&quot;, &quot;2 0 4 0&quot;, &quot;5 0 8 0&quot;, &quot;9 0 13 0&quot;, &quot;0 1 1 1&quot;, &quot;2 1 4 1&quot;, &quot;5 1 8 1&quot;, &quot;9 1 13 1&quot;, &quot;0 0 0 1&quot;, &quot;1 0 1 1&quot;, &quot;2 0 2 1&quot;, &quot;3 0 3 1&quot;, &quot;4 0 4 1&quot;, &quot;5 0 5 1&quot;, &quot;6 0 6 1&quot;, &quot;7 0 7 1&quot;, &quot;8 0 8 1&quot;, &quot;9 0 9 1&quot;, &quot;10 0 10 1&quot;, &quot;11 0 11 1&quot;, &quot;12 0 12 1&quot;, &quot;13 0 13 1&quot; }
                                
                                </span>
                            </li>
                        
                            <li class="variable data">
                                <span class="name data">n</span>
                                <span class="value data">
                                
                                    1
                                
                                </span>
                            </li>
                        
                        </ul>
                    </div>
                    <div class="testcase-output">
                        <div class='tag'>output</div>
                        <span class="prefix data">Returns</span>
                        <span class="value data">
                        
                            6
                        
                        </span>
                    </div>
                    
                    <div class="testcase-annotation">
                        <div class='tag'>note</div>
                        <div class="testcase-comment"><p>The picture looks like this:</p>

<p><img src="http://www.topcoder.com/contest/problem/PenLift/penlift1.gif"></img></p>

<p>To trace the picture using the minimum number of pen lifts, refer to the following diagram:</p>

<p><img src="http://www.topcoder.com/contest/problem/PenLift/penlift2.gif"></img></p>

<p>Start by placing your pen at the yellow dot.  Trace the yellow square.  Now lift your pen and place it on the red dot.  Move downward, tracing the vertical line segment, and then around the perimeter of the red rectangle.  Lift your pen again and place it on the green dot.  Trace the green lines using the same method as you did for the red lines.  Lift your pen a third time, placing it on the magenta dot.  Trace the magenta lines in a similar fashion.  You will need to lift your pen three more times to trace each of the leftover white segments, for a grand total of 6 pen lifts.</p></div>
                    </div>
                    
               
                </div>
            </li>
            
            <li class="testcase">
                <div class="testcase-content">
                    <div class="testcase-input">
                        <div class='tag'>input</div>
                        <ul class="variables">
                        
                            <li class="variable data">
                                <span class="name data">segments</span>
                                <span class="value data">
                                
                                    { &quot;-2 6 -2 1&quot;, &quot;2 6 2 1&quot;, &quot;6 -2 1 -2&quot;, &quot;6 2 1 2&quot;, &quot;-2 5 -2 -1&quot;, &quot;2 5 2 -1&quot;, &quot;5 -2 -1 -2&quot;, &quot;5 2 -1 2&quot;, &quot;-2 1 -2 -5&quot;, &quot;2 1 2 -5&quot;, &quot;1 -2 -5 -2&quot;, &quot;1 2 -5 2&quot;, &quot;-2 -1 -2 -6&quot;, &quot;2 -1 2 -6&quot;, &quot;-1 -2 -6 -2&quot;, &quot;-1 2 -6 2&quot; }
                                
                                </span>
                            </li>
                        
                            <li class="variable data">
                                <span class="name data">n</span>
                                <span class="value data">
                                
                                    5
                                
                                </span>
                            </li>
                        
                        </ul>
                    </div>
                    <div class="testcase-output">
                        <div class='tag'>output</div>
                        <span class="prefix data">Returns</span>
                        <span class="value data">
                        
                            3
                        
                        </span>
                    </div>
                    
                    <div class="testcase-annotation">
                        <div class='tag'>note</div>
                        <div class="testcase-comment"><p>This is an example of overlap.  Once all the segments are drawn, the picture looks like this:</p>

<p><img src="http://www.topcoder.com/contest/problem/PenLift/penlift3.gif"></img></p>

<p>You would need to lift your pen 3 times to trace every segment in this drawing exactly 5 times.</p></div>
                    </div>
                    
               
                </div>
            </li>
            
            <li class="testcase">
                <div class="testcase-content">
                    <div class="testcase-input">
                        <div class='tag'>input</div>
                        <ul class="variables">
                        
                            <li class="variable data">
                                <span class="name data">segments</span>
                                <span class="value data">
                                
                                    { &quot;-252927 -1000000 -252927 549481&quot;, &quot;628981 580961 -971965 580961&quot;, &quot;159038 -171934 159038 -420875&quot;, &quot;159038 923907 159038 418077&quot;, &quot;1000000 1000000 -909294 1000000&quot;, &quot;1000000 -420875 1000000 66849&quot;, &quot;1000000 -171934 628981 -171934&quot;, &quot;411096 66849 411096 -420875&quot;, &quot;-1000000 -420875 -396104 -420875&quot;, &quot;1000000 1000000 159038 1000000&quot;, &quot;411096 66849 411096 521448&quot;, &quot;-971965 580961 -909294 580961&quot;, &quot;159038 66849 159038 -1000000&quot;, &quot;-971965 1000000 725240 1000000&quot;, &quot;-396104 -420875 -396104 -171934&quot;, &quot;-909294 521448 628981 521448&quot;, &quot;-909294 1000000 -909294 -1000000&quot;, &quot;628981 1000000 -909294 1000000&quot;, &quot;628981 418077 -396104 418077&quot;, &quot;-971965 -420875 159038 -420875&quot;, &quot;1000000 -1000000 -396104 -1000000&quot;, &quot;-971965 66849 159038 66849&quot;, &quot;-909294 418077 1000000 418077&quot;, &quot;-909294 418077 411096 418077&quot;, &quot;725240 521448 725240 418077&quot;, &quot;-252927 -1000000 -1000000 -1000000&quot;, &quot;411096 549481 -1000000 549481&quot;, &quot;628981 -171934 628981 923907&quot;, &quot;-1000000 66849 -1000000 521448&quot;, &quot;-396104 66849 -396104 1000000&quot;, &quot;628981 -1000000 628981 521448&quot;, &quot;-971965 521448 -396104 521448&quot;, &quot;-1000000 418077 1000000 418077&quot;, &quot;-1000000 521448 -252927 521448&quot;, &quot;725240 -420875 725240 -1000000&quot;, &quot;-1000000 549481 -1000000 -420875&quot;, &quot;159038 521448 -396104 521448&quot;, &quot;-1000000 521448 -252927 521448&quot;, &quot;628981 580961 628981 549481&quot;, &quot;628981 -1000000 628981 521448&quot;, &quot;1000000 66849 1000000 -171934&quot;, &quot;-396104 66849 159038 66849&quot;, &quot;1000000 66849 -396104 66849&quot;, &quot;628981 1000000 628981 521448&quot;, &quot;-252927 923907 -252927 580961&quot;, &quot;1000000 549481 -971965 549481&quot;, &quot;-909294 66849 628981 66849&quot;, &quot;-252927 418077 628981 418077&quot;, &quot;159038 -171934 -909294 -171934&quot;, &quot;-252927 549481 159038 549481&quot; }
                                
                                </span>
                            </li>
                        
                            <li class="variable data">
                                <span class="name data">n</span>
                                <span class="value data">
                                
                                    824759
                                
                                </span>
                            </li>
                        
                        </ul>
                    </div>
                    <div class="testcase-output">
                        <div class='tag'>output</div>
                        <span class="prefix data">Returns</span>
                        <span class="value data">
                        
                            19
                        
                        </span>
                    </div>
                    
               
                </div>
            </li>
            
        </ol>
    </div>
    <hr />

    This problem statement is the exclusive and proprietary property of TopCoder, Inc. Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited. (c)2003, TopCoder, Inc. All rights reserved.
</body>
</html>
